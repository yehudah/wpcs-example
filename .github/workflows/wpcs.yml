name: PHP Code Sniffer
on: pull_request
jobs:
  phpcs:
    runs-on: ubuntu-18.04
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        env:
          runner: self-hosted        
        with:
          php-version: 7.2
          tools: composer, phpunit
          extensions: mbstring,PDO,grpc,tokenizer,xml,json,ctype,fileinfo,openssl,bcmath          
      - name: Install PHP Code Sniffer
        run: |
          composer self-update 1.*.*
          composer create-project wp-coding-standards/wpcs --no-dev
      - name: Check coding standards
        run: wpcs/vendor/bin/phpcs
